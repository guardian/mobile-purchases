stacks: [mobile]
regions: [eu-west-1]

deployments:
  mobile-purchases-cloudformation:
    type: cloud-formation
    parameters:
      templatePath: cloudformation.yaml

  mobile-purchases-iosvalidatereceipts:
    type: aws-lambda
    dependencies: [mobile-purchases-cloudformation]
    parameters:
      bucket: mobile-dist
      functionNames: [mobile-purchases-iosvalidatereceipts-]
      fileName: mobile-purchases-iosvalidatereceipts.jar
      prefixStack: false

  mobile-purchases-iosuserpurchases:
    type: aws-lambda
    dependencies: [mobile-purchases-cloudformation]
    parameters:
      bucket: mobile-dist
      functionNames: [mobile-purchases-iosuserpurchases-]
      fileName: mobile-purchases-iosuserpurchases.jar
      prefixStack: false

  mobile-purchases-google:
    type: aws-lambda
    dependencies: [mobile-purchases-cloudformation]
    parameters:
      bucket: mobile-dist
      functionNames:
        - mobile-purchases-googlepubsub-
        - mobile-purchases-googleplaysubstatus-
      fileName: mobile-purchases-google.zip
      prefixStack: false

  mobile-purchases-googleoauth:
    type: aws-lambda
    dependencies: [mobile-purchases-cloudformation]
    parameters:
      bucket: mobile-dist
      functionNames: [mobile-purchases-googleoauth-]
      fileName: mobile-purchases-googleoauth.jar
      prefixStack: false
